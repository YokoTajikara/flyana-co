!function(e){"use strict";e.fn.extend({tamForm:function(t){var a={option:""};t=e.extend(a,t);var r={trimSpace:function(e){return e.replace(/^( |　)+/,"").replace(/( |　)+$/,"")},removeHyphen:function(e){return e.replace(/(-|-|―|-|ｰ|‐|\u2212)/g,"")},toEn:function(e){return e=e.replace(/[Ａ-Ｚａ-ｚ０-９－！”＃＄％＆’（）＝＜＞，．／？＿［］｛｝＠`＾?￥｜]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),e.replace(/　/g," ")}},i={tel:function(e){return e.match(/^[\d+]{2,12}$/)},zip:function(e){return e.match(/^\d{7}$/)},email:function(e){return e.match(/^\S+@[a-zA-Z0-9-]+\.[a-zA-Z0-9\.-]*$/)},en:function(e){return e.match(/^[\x20-\x7E]*$/)}};this.each(function(){function a(e,t,a,r){var i=e.attr("name");i=i.replace(/(\[|\])/g,"\\$1");var s=l.find("[class|='tf-message-"+i+"']"),n=[];for(var o in r)n.push(".tf-message-"+i+"-"+r);var f=l.find(n.join(","));if(a)e.removeClass("tf-empty");else if(e.addClass("tf-empty"),t===!1&&!l.hasClass("tf-submitted"))return e.removeClass("tf-valid tf-error error"),s.hide(),void 0;t?(e.addClass("tf-valid").removeClass("tf-error error"),"SELECT"==e.prop("tagName")&&e.next("span").css("margin-bottom","").css("border",""),s.hide()):(e.addClass("tf-error error").removeClass("tf-valid"),"SELECT"==e.prop("tagName")&&e.next("span").css("marginBottom","5px").css("border","1px solid #F01326"),s.hide(),f.show())}function s(){return l.find(".tf-checker").each(function(){var t=e(this);0===t.find(".tf-error, .tf-empty, .error").length?t.addClass("tf-check-ok"):t.removeClass("tf-check-ok")}),t.is_control_submit_button===!0&&(l.find(".tf-error, .error").length>0?u.attr("disabled","disabled"):u.attr("disabled",null)),l.find(".tf-error, .error").length>0?!1:!0}function n(e){var s=!0,n=!0,o=[];if(t.validate){var l=t.validate(e);s=l.result,n=l.notEmpty,o=l.errCls}if(e.is(":text")||e.is("textarea")||e.is(":password")||e.is("[type=tel]")||e.is("[type=email]")){var u=r.trimSpace(e.val());if(u){var h=0;e.hasClass("tf-em")&&(u=r.toEm(u),i.em(u)||(h++,o.push("em"))),e.hasClass("tf-en")&&(u=r.toEn(u),i.en(u)||(h++,o.push("en"))),e.hasClass("tf-hiragana")&&(u=r.toHiragana(u),i.hiragana(u)||(h++,o.push("hiragana"))),e.hasClass("tf-katakana")&&(u=r.toKatakana(u),i.katakana(u)||(h++,o.push("katakana"))),e.hasClass("tf-tel")&&(u=r.removeHyphen(r.toEn(u)),i.tel(u)||(h++,o.push("tel"))),e.hasClass("tf-zip")&&(u=r.removeHyphen(r.toEn(u)),i.zip(u)||(h++,o.push("zip"))),e.hasClass("tf-email")&&(u=r.toEn(u),i.email(u)||(h++,o.push("email"))),e.val()!==u&&e.val(u),h>0?(s=!1,n=!0):s&&(s=!0,n=!0)}else e.val(""),e.hasClass("tf-required")?(o.push("required"),s=!1,n=!1):s&&(s=!0,n=!1)}if(e.hasClass("tf-required")){if(e.is(":checkbox")||e.is(":radio")){var d="[name='"+e.attr("name")+"']:checked";0===f.filter(d).length?(o.push("required"),s=!1,n=!1):s&&(s=!0,n=!0)}e.is("select")&&(e.val()?s&&(s=!0,n=!0):(o.push("required"),s=!1,n=!1))}return a(e,s,n,o),s}function o(){if(t.is_debug)return 0;var a=0;return f.each(function(){a+=!n(e(this))}),s(),a}var l=e(this),f=l.find("input, select, textarea"),u=l.find("input:submit, input:image");return u.click(function(){return l.addClass("tf-submitted"),o()>0?(alert("Please fill in all required fields and be sure to use valid information."),!1):!0}),f.change(function(){e(this).is(":checkbox")||e(this).is(":radio")?o():n(e(this)),"SELECT"==e(this).prop("tagName")&&e(this).width(e(this).next("span").innerWidth())}),f.blur(function(){n(e(this)),s()}),t.is_initial_validate&&o(),this})}})}(jQuery);